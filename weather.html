<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Clima Lanzarote</title>
  <style>
    body{background:#f3f4f6;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;margin:0;padding:2rem}
    .wx{max-width:640px;margin:0 auto;padding:1rem;border:1px solid #e5e7eb;border-radius:12px;background:#fff;box-shadow:0 6px 18px rgba(0,0,0,.06)}
    .wx__header{display:flex;justify-content:space-between;align-items:center;gap:1rem}
    .wx h3{margin:0;font-size:1.1rem;color:#111827}
    .wx small{color:#6b7280}
    .wx__now{display:flex;align-items:center;gap:.5rem}
    #wx-temp{font-size:2.2rem;font-weight:700;color:#111827;line-height:1}
    #wx-icon{font-size:1.8rem}
    .wx__meta{display:flex;gap:1rem;flex-wrap:wrap;margin:.5rem 0 0;color:#374151;font-size:.95rem}
    .wx__forecast{display:grid;grid-template-columns:repeat(5,minmax(0,1fr));gap:.5rem;margin-top:.8rem}
    .wx__day{padding:.6rem;border:1px solid #e5e7eb;border-radius:10px;text-align:center;background:#f9fafb}
    .wx__day .d{font-weight:600;color:#111827}
    .wx__day .i{font-size:1.25rem}
    .wx__day .t{color:#374151;font-size:.9rem}
    @media (max-width:480px){.wx__forecast{grid-template-columns:repeat(3,1fr)}}
  </style>
</head>
<body>

  <div id="wx-card" class="wx">
    <div class="wx__header">
      <div>
        <h3>Lanzarote</h3>
        <small id="wx-updated">‚Äî</small>
      </div>
      <div class="wx__now">
        <span id="wx-temp">--¬∞</span>
        <span id="wx-icon" aria-hidden="true">‚òÄÔ∏è</span>
      </div>
    </div>

    <div class="wx__meta">
      <span id="wx-desc">‚Äî</span>
      <span>Viento: <strong id="wx-wind">‚Äî</strong> km/h</span>
    </div>

    <div class="wx__forecast" id="wx-forecast">
      <!-- se completa por JS -->
    </div>
  </div>

  <script>
  (function(){
    const LAT = 28.97, LON = -13.65; // Lanzarote
    const url = `https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}&current_weather=true&daily=weathercode,temperature_2m_max,temperature_2m_min&timezone=auto`;

    const elTemp   = document.getElementById('wx-temp');
    const elIcon   = document.getElementById('wx-icon');
    const elDesc   = document.getElementById('wx-desc');
    const elWind   = document.getElementById('wx-wind');
    const elUpd    = document.getElementById('wx-updated');
    const elFc     = document.getElementById('wx-forecast');

    const CODES = {
      0:["‚òÄÔ∏è","Despejado"],1:["üå§Ô∏è","Mayormente soleado"],2:["‚õÖ","Parcialmente nublado"],3:["‚òÅÔ∏è","Nublado"],
      45:["üå´Ô∏è","Niebla"],48:["üå´Ô∏è","Niebla"],
      51:["üå¶Ô∏è","Llovizna d√©bil"],53:["üå¶Ô∏è","Llovizna"],55:["üåßÔ∏è","Llovizna fuerte"],
      61:["üå¶Ô∏è","Lluvia d√©bil"],63:["üåßÔ∏è","Lluvia"],65:["üåßÔ∏è","Lluvia intensa"],
      66:["üåßÔ∏è","Lluvia helada d√©bil"],67:["üåßÔ∏è","Lluvia helada"],
      71:["üå®Ô∏è","Nieve d√©bil"],73:["üå®Ô∏è","Nieve"],75:["üå®Ô∏è","Nieve intensa"],
      77:["üå®Ô∏è","Granizo/nevisca"],
      80:["üå¶Ô∏è","Chubascos d√©biles"],81:["üåßÔ∏è","Chubascos"],82:["‚õàÔ∏è","Chubascos fuertes"],
      95:["‚õàÔ∏è","Tormenta"],96:["‚õàÔ∏è","Tormenta con granizo"],99:["‚õàÔ∏è","Tormenta fuerte con granizo"]
    };

    function fmtDay(iso){
      const d = new Date(iso);
      return d.toLocaleDateString('es-ES',{weekday:'short'}).replace('.','');
    }

    fetch(url)
      .then(r=>r.json())
      .then(data=>{
        const cw = data.current_weather;
        const [emoji,desc] = CODES[cw.weathercode] || ["‚ÑπÔ∏è","Tiempo"];
        elTemp.textContent = Math.round(cw.temperature) + "¬∞";
        elIcon.textContent = emoji;
        elDesc.textContent = desc;
        elWind.textContent = Math.round(cw.windspeed);
        elUpd.textContent  = "Actualizado: " + new Date(cw.time).toLocaleString('es-ES');

        const days = data.daily.time.map((t,i)=>({
          time:t, code:data.daily.weathercode[i],
          tmax:Math.round(data.daily.temperature_2m_max[i]),
          tmin:Math.round(data.daily.temperature_2m_min[i])
        })).slice(0,5);

        elFc.innerHTML = days.map(d=>{
          const [e,dd] = CODES[d.code] || ["‚ÑπÔ∏è",""];
          return `<div class="wx__day">
            <div class="d">${fmtDay(d.time)}</div>
            <div class="i" title="${dd}">${e}</div>
            <div class="t">${d.tmax}¬∞ / ${d.tmin}¬∞</div>
          </div>`;
        }).join('');
      })
      .catch(err=>{
        console.error(err);
        elDesc.textContent="No se pudo cargar el clima.";
      });
  })();
  </script>
</body>
</html>
